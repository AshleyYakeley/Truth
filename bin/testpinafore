#!/usr/bin/env -S bash -e
while [[ ! -z "$1" ]]; do
    case "$1" in
        --build)
            make exe
            shift 1
            ;;
        -i)
            stack --docker-env DISPLAY exec -- pinafore -I Pinafore/pinafore-stdlib/data --data test/pinafore -i
            shift 1
            ;;
        -*)
            echo "unknown option: $1" > /dev/stderr
            exit 1
            ;;
        *)
            stack --docker-env DISPLAY exec -- pinafore -I Pinafore/pinafore-stdlib/data --data test/pinafore "Pinafore/pinafore-app/test/script/$1"
            shift 1
            ;;
    esac
done
