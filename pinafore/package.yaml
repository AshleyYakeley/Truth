name: pinafore
version: "0.1"
_common: !include "../common.yaml"
<<: *author

<<: *language

library:
    source-dirs: lib
    dependencies:
      - base >= 4.9 && < 5
      - time
      - containers
      - filepath
      - directory
      - cereal
      - uuid
      - aeson
      - sqlite-simple
      - shapes
      - parsec
      - truth-core
    exposed-modules:
      - Language.Expression.Witness
      - Language.Expression.Expression
      - Language.Expression.NameWit
      - Language.Expression.Named
      - Language.Expression.Sealed
      - Language.Expression.Renamer
      - Language.Expression.Unifier
      - Language.Expression.Bindings
      - Language.Expression.Typed
      - Language.Expression.Unitype
      - Language.Expression.Dolan
      - Pinafore
      - Pinafore.Main
      - Pinafore.Language.Value
      - Pinafore.Language.Type
      - Pinafore.Language.Convert
      - Pinafore.Language.Name
      - Pinafore.Language.Expression
      - Pinafore.Language
    other-modules:
      - Language.Expression.UVar
      - Language.Expression.Dolan.TypeRange
      - Language.Expression.Dolan.Polarity
      - Language.Expression.Dolan.Variance
      - Pinafore.Number
      - Pinafore.Literal
      - Pinafore.Morphism
      - Pinafore.Entity
      - Pinafore.Table
      - Pinafore.PredicateMorphism
      - Pinafore.File
      - Pinafore.Pinafore
      - Pinafore.Types
      - Pinafore.Language.Token
      - Pinafore.Language.Read
      - Pinafore.Language.Lifted
      - Pinafore.Language.If
      - Pinafore.Language.Order
      - Pinafore.Language.Doc
      - Pinafore.Language.Predefined
      - Pinafore.Database
      - Pinafore.Database.SQLite

tests:
    test:
        source-dirs: test
        dependencies:
          - base >= 4.9 && < 5
          - bytestring
          - containers
          - countable
          - open-witness
          - template-haskell
          - transformers
          - witness
          - comonad
          - mono-traversable
          - shapes
          - truth-core
          - pinafore
          - QuickCheck
          - tasty
          - tasty-hunit
          - tasty-quickcheck
          - tasty-golden
        main: Main.hs
        other-modules:
          - Test.Language
          - Test.Entity
          - Test.Type

executables:
    pinafore:
        source-dirs: app
        dependencies:
          - base >= 4.9 && < 5
          - filepath
          - bytestring
          - shapes
          - truth-core
          - truth-gtk
          - pinafore
          - directory
          - optparse-applicative
          - xdg-basedir
        main: Main.hs
        ghc-options: -threaded
