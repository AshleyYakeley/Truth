name: pinafore
version: "0.1"
_common: !include "../common.yaml"
<<: *author

<<: *language

library:
    source-dirs: lib
    dependencies:
      - base >= 4.9 && < 5
      - time
      - containers
      - filepath
      - directory
      - cereal
      - uuid
      - aeson
      - sqlite-simple
      - shapes
      - parsec
      - memory
      - cryptonite
      - truth-core
    exposed-modules:
      - Language.Expression.Witness
      - Language.Expression.Expression
      - Language.Expression.NameWit
      - Language.Expression.Named
      - Language.Expression.Sealed
      - Language.Expression.Renamer
      - Language.Expression.Unifier
      - Language.Expression.Abstract
      - Language.Expression.Bindings
      - Language.Expression.Typed
      - Language.Expression.Unitype
      - Language.Expression.Dolan
      - Pinafore.Base
      - Pinafore.Storage
      - Pinafore.Language
      - Pinafore.Main
      - Pinafore.Pinafore
      - Pinafore
      - Pinafore.Test
    other-modules:
      - Language.Expression.UVar
      - Language.Expression.Dolan.Range
      - Language.Expression.Dolan.Polarity
      - Language.Expression.Dolan.Variance
      - Language.Expression.Dolan.Arguments
      - Language.Expression.Dolan.TypeF
      - Language.Expression.Dolan.MPolarity
      - Language.Expression.Dolan.RangeF
      - Pinafore.Base.Know
      - Pinafore.Base.Number
      - Pinafore.Base.Literal
      - Pinafore.Base.Morphism
      - Pinafore.Base.Entity
      - Pinafore.Base.Edit
      - Pinafore.Base.PredicateMorphism
      - Pinafore.Base.Action
      - Pinafore.Base.ImmutableReference
      - Pinafore.Language.Name
      - Pinafore.Language.Literal
      - Pinafore.Language.NamedEntity
      - Pinafore.Language.SimpleEntityType
      - Pinafore.Language.Reference
      - Pinafore.Language.Set
      - Pinafore.Language.Morphism
      - Pinafore.Language.If
      - Pinafore.Language.Show
      - Pinafore.Language.Order
      - Pinafore.Language.GroundType
      - Pinafore.Language.TypeContext
      - Pinafore.Language.Convert.Base
      - Pinafore.Language.Type.Type
      - Pinafore.Language.Type.Rename
      - Pinafore.Language.Type.Simplify.OneSidedTypeVars
      - Pinafore.Language.Type.Simplify.DuplicateGroundTypes
      - Pinafore.Language.Type.Simplify.SharedTypeVars
      - Pinafore.Language.Type.Simplify.DuplicateTypeVars
      - Pinafore.Language.Type.Simplify
      - Pinafore.Language.Type.Unify
      - Pinafore.Language.Type
      - Pinafore.Language.EntityType
      - Pinafore.Language.Read.Token
      - Pinafore.Language.Read.RefNotation
      - Pinafore.Language.Read.Parser
      - Pinafore.Language.Read.Type
      - Pinafore.Language.Read.TypeDecls
      - Pinafore.Language.Read.Property
      - Pinafore.Language.Read.Infix
      - Pinafore.Language.Read.Expression
      - Pinafore.Language.Read.Interactive
      - Pinafore.Language.Read
      - Pinafore.Language.Expression
      - Pinafore.Language.Convert
      - Pinafore.Language.Doc
      - Pinafore.Language.Predefined
      - Pinafore.Storage.Table
      - Pinafore.Storage.Database
      - Pinafore.Storage.Database.SQLite
      - Pinafore.Storage.File

extra-source-files: examples/*

tests:
    test:
        source-dirs: test
        dependencies:
          - base >= 4.9 && < 5
          - bytestring
          - containers
          - countable
          - open-witness
          - template-haskell
          - transformers
          - witness
          - comonad
          - mono-traversable
          - shapes
          - truth-core
          - pinafore
          - QuickCheck
          - tasty
          - tasty-hunit
          - tasty-quickcheck
          - tasty-golden
        main: Main.hs
        other-modules:
          - Test.Language
          - Test.Entity
          - Test.Type
          - Test.ReadType
          - Test.Examples

benchmarks:
    benchmark:
        source-dirs: benchmark
        dependencies:
          - base >= 4.9 && < 5
          - criterion
          - shapes
          - pinafore
        main: Main.hs

executables:
    pinafore:
        source-dirs: app
        dependencies:
          - base >= 4.9 && < 5
          - filepath
          - bytestring
          - shapes
          - truth-core
          - truth-gtk
          - pinafore
          - directory
          - optparse-applicative
          - xdg-basedir
        main: Main.hs
        ghc-options: -threaded
