#!/usr/bin/pinafore

let

e1: Entity
= ();

f: WholeRef a -> Unit
= fn _ => ();

in do
    (ref,_) <- newMemWhole >>= fn ref => return (ref, f ref);
    ref := e1;
    e2 <- get ref;
    Debug.checkEntity "CHECK e1" e1;
    Debug.checkEntity "CHECK e2" e2;
    outputLn "LAST";
    end
