#!/usr/bin/pinafore
Env.openDefaultStore >>= fn store =>
let
import "pinafore-gnome";
using Storage;

opentype T;
me = openEntity @T !"T";

func20 = fns n a b c d e f => GTK.label n;
func19 = fns n a b c d e f => func20 n a b c d e f;
func18 = fns n a b c d e f => func19 n a b c d e f;
func17 = fns n a b c d e f => func18 n a b c d e f;
func16 = fns n a b c d e f => func17 n a b c d e f;
func15 = fns n a b c d e f => func16 n a b c d e f;
func14 = fns n a b c d e f => func15 n a b c d e f;
func13 = fns n a b c d e f => func14 n a b c d e f;
func12 = fns n a b c d e f => func13 n a b c d e f;
func11 = fns n a b c d e f => func12 n a b c d e f;
func10 = fns n a b c d e f => func11 n a b c d e f;
func9 = fns n a b c d e f => func10 n a b c d e f;
func8 = fns n a b c d e f => func9 n a b c d e f;
func7 = fns n a b c d e f => func8 n a b c d e f;
func6 = fns n a b c d e f => func7 n a b c d e f;
func5 = fns n a b c d e f => func6 n a b c d e f;
func4 = fns n a b c d e f => func5 n a b c d e f;
func3 = fns n a b c d e f => func4 n a b c d e f;
func2 = fns n a b c d e f => func3 n a b c d e f;
func1 = fns n a b c d e f => func2 n a b c d e f;
func0 = fns n a b c d e f => func1 n a b c d e f;

w : GTK.Context -> Action GTK.Window
= fn gtk => GTK.openWindow gtk (300,400) {"Test"} $ func0 (pureWholeModel "Text") False False False False False False;

prop0 = property @T @Text !"000" store;

act : Action Unit
= do
    Debug.message "ACTION: start";
    tstart <- getTime;
    prop0 !$ {me} := "Example";
    tend <- getTime;
    Env.outputLn $ "Time: " <> show (diffTime tend tstart >- fn Seconds s => round (s .* 1000));
    Debug.message "ACTION: end";
    end

in GTK.run $ fn gtk => do
    w1 <- w gtk;
    act;
    act;
    GTK.closeWindow w1;
    end
