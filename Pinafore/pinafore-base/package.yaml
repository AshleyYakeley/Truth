_common: !include "../../common.yaml"
name: pinafore-base
version: *pinafore_version
<<: *author

<<: *language

library:
    source-dirs: lib
    dependencies:
      - base >= 4.12
      - shapes
      - deepseq
      - time
      - memory
      - blake3
      - changes-core
      - changes-world
    exposed-modules:
      - Pinafore.Base
      - Pinafore.Storage
    other-modules:
      - Pinafore.Base.Know
      - Pinafore.Base.Showable
      - Pinafore.Base.SafeRational
      - Pinafore.Base.Number
      - Pinafore.Base.Order
      - Pinafore.Base.Literal
      - Pinafore.Base.FunctionMorphism
      - Pinafore.Base.Morphism
      - Pinafore.Base.ModelBased
      - Pinafore.Base.ModelMorphism
      - Pinafore.Base.ModelOrder
      - Pinafore.Base.Ref
      - Pinafore.Base.Anchor
      - Pinafore.Base.Entity
      - Pinafore.Base.Lens
      - Pinafore.Base.KnowShim
      - Pinafore.Base.EntityStorer
      - Pinafore.Base.Edit
      - Pinafore.Base.EntityAdapter
      - Pinafore.Base.PredicateMorphism
      - Pinafore.Base.Action
      - Pinafore.Base.ImmutableWholeModel
      - Pinafore.Base.File
      - Pinafore.Storage.Table
      - Pinafore.Storage.Database
      - Pinafore.Storage.Database.SQLite
      - Pinafore.Storage.File

tests:
    test:
        source-dirs: test
        dependencies:
          - base >= 4.12
          - shapes
          - changes-core
          - pinafore-base
        main: Main.hs
        other-modules:
          - Test.Numeric
          - Test.Anchor
          - Test.Storage
          - Test.ReadShow
        ghc-options: -threaded
